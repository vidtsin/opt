<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

<!--         <record model="ir.ui.view" id="course_form_view">
        <field name="name">booking.form</field>
        <field name="model">product.product</field>
         <field name="inherit_id" ref="sale.view_order_form" />
            <field name="arch" type="xml">

                <xpath expr="//[@name='name']" position="after">
                  <field name="customer" string="Cust"/>
                </xpath>
            </field>
        </record>          
 -->               

<!--       <record id="action_scheduler_home_page" model="ir.actions.client">
          <field name="tag">scheduler.homepage</field>
      </record>

      <menuitem id="home_page_scheduler_menu" parent="backing_the_packers.menu_root"
        name="Home Page" action="action_scheduler_home_page"/> -->
                              
      <!-- Gantt view -->
<!--       <record id="booking_view_gantt" model="ir.ui.view">     
        <field name="name">booking.gantt</field>     
        <field name="model">product.product</field>
        <field name="arch" type="xml">
          <gantt string=""
                 type = "planning"     
                 date_start="start_date"
                 date_stop="end_date"
                 fold_last_level="true"
                 round_dnd_dates="true"
                 consolidation="customer"
                 
                 consolidation_exclude = "exclude"
                 default_group_by="product_tmpl_id"
                 drag_resize = "true"
                 color="true"
                 >
                 <p>Hello World</p>
          </gantt>
        </field>
      </record> -->


        <!--###########################################################-->
      <!-- View for Updating Booking Form view -->
      <record id="update_booking_form_view" model="ir.ui.view">
        <field name="name">update.booking.form.view</field>
        <field name="model">booking.info</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <header>
                    <!--nothing-->
            </header>
            <sheet>
                <div class="oe_title">

                        <h1>
                            <label for="customer"/>
                            <field name="customer"/>
                        </h1>
                    </div>
                <group>
                    <group>
<!--                         <field name="start_date"/>
                        <field name="end_date"/>
                        <field name="product_id"/>
                        <field name="button_flag" invisible = '1'/> -->
                    </group>
                </group>
                <group>
                    <group>
                        <!--nothing-->
                    </group>
                    <group>
                        <!-- <button name="insert_sale_order" 
                          attrs="{'invisible':[('button_flag','=',2)]}" string="Confirm" type="object" class="btn-primary"/> -->

                    </group>
                </group>
            </sheet>


        </field>
      </record>


        <!--###########################################################-->
      <!-- View for Booking Form view -->
      <record id="booking_form_view" model="ir.ui.view">
        <field name="name">booking.form.view</field>
        <field name="model">booking.info</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <header>
                    <!--nothing-->
            </header>
            <sheet>
                <div class="oe_title">

                        <h1>
                            <label for="customer"/>
                            <field name="customer" 
                              attrs="{'readonly':[('button_flag','=',2)]}"/>
                        </h1>
                    </div>
                <group>
                    <group>
                        <field name="start_date" 
                          attrs="{'readonly':[('button_flag','=',2)]}"/>
                        <field name="end_date" 
                          attrs="{'readonly':[('button_flag','=',2)]}"/>
                        <field name="product_id" 
                          attrs="{'readonly':[('button_flag','=',2)], 'invisible': [('is_multiple', '=', True)]}"/>
                        <field name="button_flag" invisible = '1'/>
                        <field name="room_booking_status"/>
                        <field name="is_multiple"/>
                        <field name="multiple_booking_ids" invisible = '0' widget="many2many_tags"/>
                    </group>
                </group>
                <notebook>
                        <page>
                            <field name="booking_lines" attrs="{'invisible': [('is_multiple', '=', False)]}" >
                                <tree editable="bottom">
                                    <field name="product_id"/>
                                    <field name="capacity"/>
                                </tree>
                            </field>
                        </page>
                </notebook>
                <group>
                    <group>
                        <!--nothing-->
                    </group>
                    <group>
                      <button name="insert_sale_order" 
                          attrs="{'invisible':[('button_flag','=',2)]}" string="Confirm" type="object" class="btn-primary"/>
                      <button name="update_status" attrs="{'invisible':[('button_flag','!=',2)]}"
                          string="Update" type="object" class="btn-primary"/>
                    </group>
                </group>
            </sheet>


        </field>
      </record>
      
  <!-- ================Testing booking form=========================-->
       <record model="ir.actions.act_window" id="booking_form_action">
            <field name="name">Bookings form</field>
            <field name="res_model">booking.info</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="booking_form_view"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Create the first booking
                </p>
            </field>
        </record>
        <menuitem id="main_booking_form_test" parent="main_booking_menu" name="Booking" action="booking_form_action" sequence="50"/>
<!--#######################################################################################-->

      <!-- View for Booking relation in product.product -->
      <record id="booking_info" model="ir.ui.view">
        <field name="name">booking.info</field>
        <field name="model">booking.info</field>
        <!-- <field name="inherit_id" ref="product.product_normal_form_view" /> -->
        <field name="type">tree</field>
        <field name="arch" type="xml">
          <tree editable='bottom'>               
            <field name="name"/>     
            <field name="customer"/>
            <field name="start_date"/>
            <field name="end_date"/>
          </tree>     
        </field>
      </record>     

      <record id="product_booking_info" model="ir.ui.view">
        <field name="name">product.booking.info</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view" />
        <field name="type">form</field>
        <field name="arch" type="xml">
          <xpath expr="//form/sheet/notebook/page[3]" position="after">
            <page string="Bookings">

            <field name="booking_info"/>
          </page>
          </xpath>

        </field>
      </record>

<!--  assert gb_field.store and gb_field.column_type, "Fields in 'groupby' must be regular database-persisted fields (no function or related fields), or function fields with store=True"
AssertionError: Fields in 'groupby' must be regular database-persisted fields (no function or related fields), or function fields with store=True -->


        <!-- window action -->
        <!--
            The following tag is an action definition for a "window action",
            that is an action opening a view or a set of views
        -->
        <record model="ir.actions.act_window" id="booking_list_action">
            <field name="name">Bookings</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">gantt</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">Create the first booking
                </p>
            </field>
        </record>


        <menuitem id="main_booking_menu" parent="backing_the_packers.menu_root" name="Booking" action="booking_list_action" sequence="40"/>
    </data>
    <data>
        <record id="view_order_inherit_form_view" model="ir.ui.view">
            <field name="name">view.order.inherit.form.view</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='order_line']/form//field[@name='price_unit']" position="after">
                        <field name="room_booking_status"/>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='price_unit']" position="after">
                        <field name="room_booking_status"/>
                </xpath>
            </field>
        </record>

    </data>

<data>

<!--############################Product View#########################################-->

    <record id="room_attribute_only_form_view" model="ir.ui.view">
        <field name="name">product.template.product.form.attribute</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <!--<xpath expr="//field[@name='is_room']" position="after">-->
                <!--<field name="capacity" attrs="{'invisible': [('is_room', '=', False )]}"/>-->
                <!--<field name="status" attrs="{'invisible': [('is_room', '=', False )]}"/>-->
            <!--</xpath>-->
            <field name="categ_id" position="before">
                <field name="capacity" attrs="{'invisible': [('is_room', '=', False )]}"/>
                <field name="status" attrs="{'invisible': [('is_room', '=', False )]}"/>
            </field>
        </field>
    </record>
<!--####################################Product View End############################################-->

</data>
    
</odoo>